{"ast":null,"code":"import { ENTER } from '@angular/cdk/keycodes';\nimport { HttpEventType, HttpResponse } from '@angular/common/http';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/create-story.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/story.service\";\nimport * as i4 from \"src/app/services/update-story.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"ngp-image-picker\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/material/select\";\nimport * as i12 from \"@angular/material/core\";\nimport * as i13 from \"@angular/forms\";\nimport * as i14 from \"@angular/material/chips\";\nconst _c0 = a0 => ({\n  width: a0\n});\nconst _c1 = (a0, a1, a2) => ({\n  \"bluish\": a0,\n  \"greenish\": a1,\n  \"redish\": a2\n});\nfunction EditStoriesComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"div\", 7);\n    i0.ɵɵelement(3, \"div\", 8)(4, \"div\", 9)(5, \"div\", 10)(6, \"div\", 11);\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction EditStoriesComponent_div_3_mat_chip_row_43_mat_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 46);\n    i0.ɵɵtext(1, \"cancel\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditStoriesComponent_div_3_mat_chip_row_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-chip-row\", 44);\n    i0.ɵɵlistener(\"removed\", function EditStoriesComponent_div_3_mat_chip_row_43_Template_mat_chip_row_removed_0_listener() {\n      const tag_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.remove(tag_r4));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, EditStoriesComponent_div_3_mat_chip_row_43_mat_icon_2_Template, 2, 0, \"mat-icon\", 45);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tag_r4 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"removable\", ctx_r1.removable);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", tag_r4, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.removable);\n  }\n}\nfunction EditStoriesComponent_div_3_img_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 47);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r1.meng, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction EditStoriesComponent_div_3_div_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 48)(1, \"div\", 49);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c0, ctx_r1.progress.percentage + \"%\"));\n    i0.ɵɵattribute(\"aria-valuenow\", ctx_r1.progress.percentage);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.progress.percentage, \"%\");\n  }\n}\nfunction EditStoriesComponent_div_3_h1_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"\", ctx_r1.blog.Topic, \" > \", ctx_r1.blog.Title, \"\");\n  }\n}\nfunction EditStoriesComponent_div_3_h1_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate3(\"\", ctx_r1.blog.Topic, \" > \", ctx_r1.blog.SubTopic, \" > \", ctx_r1.blog.Title, \"\");\n  }\n}\nfunction EditStoriesComponent_div_3_div_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵelement(1, \"div\", 8)(2, \"div\", 9)(3, \"div\", 10)(4, \"div\", 11);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EditStoriesComponent_div_3_div_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"h2\", 50);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(2, _c1, ctx_r1.myMessage.includes(\"Saving...\"), ctx_r1.myMessage.includes(\"saved\"), !ctx_r1.myMessage.includes(\"saved\")));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.myMessage);\n  }\n}\nfunction EditStoriesComponent_div_3_button_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 51)(1, \"mat-icon\", 52);\n    i0.ɵɵtext(2, \"subject\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Update Story \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"disabled\", (!ctx_r1.createStoryForm.valid || ctx_r1.meng == \"../../../assets/stevieapp3.png\" || ctx_r1.returnJSONblog()) && !ctx_r1.imageFile);\n  }\n}\nfunction EditStoriesComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"div\", 13)(2, \"div\", 14)(3, \"div\", 15)(4, \"h4\", 16);\n    i0.ɵɵtext(5, \"Update Story\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"ngp-image-picker\", 17);\n    i0.ɵɵlistener(\"$imageChanged\", function EditStoriesComponent_div_3_Template_ngp_image_picker__imageChanged_6_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onImageChange($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"form\", 18);\n    i0.ɵɵlistener(\"ngSubmit\", function EditStoriesComponent_div_3_Template_form_ngSubmit_7_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.updatestory(ctx_r1.blog._id));\n    });\n    i0.ɵɵelementStart(8, \"mat-form-field\", 19)(9, \"mat-label\", 20);\n    i0.ɵɵtext(10, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 21);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function EditStoriesComponent_div_3_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.blog.Title, $event) || (ctx_r1.blog.Title = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"mat-form-field\", 22)(13, \"mat-label\", 20);\n    i0.ɵɵtext(14, \"Topic\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"mat-select\", 23);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function EditStoriesComponent_div_3_Template_mat_select_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.blog.Topic, $event) || (ctx_r1.blog.Topic = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(16, \"mat-option\", 24);\n    i0.ɵɵtext(17, \"Coding\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"mat-option\", 25);\n    i0.ɵɵtext(19, \"Anime\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"mat-option\", 26);\n    i0.ɵɵtext(21, \"Animation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"mat-option\", 27);\n    i0.ɵɵtext(23, \"Movies\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"mat-option\", 28);\n    i0.ɵɵtext(25, \"Music\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(26, \"mat-form-field\", 19)(27, \"mat-label\", 20);\n    i0.ɵɵtext(28, \"SubTopic\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"input\", 29);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function EditStoriesComponent_div_3_Template_input_ngModelChange_29_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.blog.SubTopic, $event) || (ctx_r1.blog.SubTopic = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"mat-form-field\", 19)(31, \"mat-label\", 20);\n    i0.ɵɵtext(32, \"Button Text\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"input\", 30);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function EditStoriesComponent_div_3_Template_input_ngModelChange_33_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.blog.ButtonText, $event) || (ctx_r1.blog.ButtonText = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(34, \"mat-form-field\", 19)(35, \"mat-label\", 20);\n    i0.ɵɵtext(36, \"Button Link\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"input\", 31);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function EditStoriesComponent_div_3_Template_input_ngModelChange_37_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.blog.ButtonLink, $event) || (ctx_r1.blog.ButtonLink = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(38, \"mat-form-field\", 22)(39, \"mat-label\", 20);\n    i0.ɵɵtext(40, \"Tags\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"mat-chip-grid\", 32, 0);\n    i0.ɵɵtemplate(43, EditStoriesComponent_div_3_mat_chip_row_43_Template, 3, 3, \"mat-chip-row\", 33);\n    i0.ɵɵelementStart(44, \"input\", 34);\n    i0.ɵɵlistener(\"matChipInputTokenEnd\", function EditStoriesComponent_div_3_Template_input_matChipInputTokenEnd_44_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.add($event));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(45, \"mat-form-field\", 35)(46, \"mat-label\", 20);\n    i0.ɵɵtext(47, \"Story\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(48, \"textarea\", 36);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function EditStoriesComponent_div_3_Template_textarea_ngModelChange_48_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.blog.story, $event) || (ctx_r1.blog.story = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(49, EditStoriesComponent_div_3_img_49_Template, 1, 1, \"img\", 37);\n    i0.ɵɵelement(50, \"br\");\n    i0.ɵɵtemplate(51, EditStoriesComponent_div_3_div_51_Template, 3, 5, \"div\", 38);\n    i0.ɵɵelement(52, \"br\")(53, \"br\");\n    i0.ɵɵtemplate(54, EditStoriesComponent_div_3_h1_54_Template, 2, 2, \"h1\", 39)(55, EditStoriesComponent_div_3_h1_55_Template, 2, 3, \"h1\", 39);\n    i0.ɵɵelement(56, \"div\", 40);\n    i0.ɵɵtemplate(57, EditStoriesComponent_div_3_div_57_Template, 5, 0, \"div\", 41)(58, EditStoriesComponent_div_3_div_58_Template, 3, 6, \"div\", 42)(59, EditStoriesComponent_div_3_button_59_Template, 4, 1, \"button\", 43);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const chipList_r5 = i0.ɵɵreference(42);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"_imageSrc\", ctx_r1.initialImage)(\"_config\", ctx_r1.imagePickerConf);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.createStoryForm);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"color\", \"accent\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.blog.Title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.blog.Topic);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"color\", \"accent\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.blog.SubTopic);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"color\", \"accent\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.blog.ButtonText);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"color\", \"accent\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.blog.ButtonLink);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.blog.Tags);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"matChipInputFor\", chipList_r5)(\"matChipInputSeparatorKeyCodes\", ctx_r1.separatorKeysCodes)(\"matChipInputAddOnBlur\", ctx_r1.addOnBlur);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.blog.story);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.meng != \"../../../assets/stevieapp3.png\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.savingStory);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.blog.Title && ctx_r1.blog.Topic && !ctx_r1.blog.SubTopic);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.blog.Title && ctx_r1.blog.Topic && ctx_r1.blog.SubTopic);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"innerHTML\", ctx_r1.blog.story, i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.savingStory);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.myMessage);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.savingStory);\n  }\n}\nexport let EditStoriesComponent = /*#__PURE__*/(() => {\n  class EditStoriesComponent {\n    constructor(saveBlog, route, getStory, updateStory) {\n      this.saveBlog = saveBlog;\n      this.route = route;\n      this.getStory = getStory;\n      this.updateStory = updateStory;\n      this.imagePickerConf = {\n        borderRadius: \"10px\",\n        language: \"en\",\n        width: \"100%\",\n        height: \"40vh\"\n      };\n      this.blog = JSON.parse('{}');\n      this.initialImage = \"../../../assets/stevieapp3.png\";\n      this.meng = \"../../../assets/stevieapp3.png\";\n      this.progress = {\n        percentage: 0\n      };\n      this.savingStory = false;\n      // visible = true;\n      this.selectable = true;\n      this.removable = true;\n      this.addOnBlur = true;\n      this.separatorKeysCodes = [ENTER];\n      this.route.params.subscribe(params => {\n        this.emo = params;\n        this.getBlog(this.emo);\n      });\n    }\n    ngOnInit() {\n      this.blog.image = \"../../../assets/stevieapp3.png\";\n      this.includevalidation();\n    }\n    onImageChange(vent) {\n      if (vent) {\n        this.imageFile = this.dataURLtoFile(vent, 'image.png');\n        this.meng = this.dataURItoBlob(vent);\n        var reader = new FileReader();\n        reader.readAsDataURL(this.meng);\n        reader.onload = event => {\n          this.meng = event.target?.result;\n        };\n      } else {\n        this.meng = \"../../../assets/stevieapp3.png\";\n      }\n    }\n    updatestory(id) {\n      this.savingStory = true;\n      if (this.imageFile) {\n        this.updateStory.deletesingleFile(this.blog.imageURL + `.png`).subscribe(event => {\n          if (event instanceof HttpResponse) {\n            this.updatePhoto(id);\n          }\n        }, err => {\n          this.myMessage = \"Could not delete photo!\";\n          this.reset();\n        });\n      } else {\n        this.savestory(id);\n      }\n    }\n    updatePhoto(id) {\n      if (this.blog.SubTopic) {\n        this.blog.imageURL = 'StevieApp/Blog/' + this.blog.Topic + '/' + this.blog.SubTopic + '/' + this.blog.Title;\n      } else {\n        this.blog.imageURL = 'StevieApp/Blog/' + this.blog.Topic + '/' + this.blog.Title;\n      }\n      this.saveBlog.saveImage(this.imageFile, null, this.blog.imageURL).subscribe(event => {\n        if (event.type === HttpEventType.UploadProgress) {\n          this.progress.percentage = Math.round(100 * event.loaded / event.total);\n        } else if (event instanceof HttpResponse) {\n          if (event.body?.toString().includes('naming')) {\n            this.myMessage = \"Photo saved!\";\n            setTimeout(() => {\n              this.savestory(id);\n            }, 500);\n          } else {\n            this.myMessage = \"Could not upload photo!\";\n            this.reset();\n          }\n        }\n      }, err => {\n        this.myMessage = \"Network Issue!\";\n        this.reset();\n      });\n    }\n    savestory(id) {\n      var incomplete = JSON.parse(JSON.stringify(this.blog));\n      delete incomplete['_id'];\n      this.updateStory.updateUser(incomplete, id).subscribe(event => {\n        if (event instanceof HttpResponse) {\n          //console.log(event.body?.toString());\n          if (event.body?.toString().includes('Updated')) {\n            this.meng = \"../../../assets/stevieapp3.png\";\n            document.getElementById('delete-img')?.click();\n            this.blog = JSON.parse('{}');\n            this.myMessage = \"Story updated and saved!\";\n            this.reset();\n            this.imageFile = undefined;\n            setTimeout(() => {\n              this.getBlog(this.emo);\n            }, 2100);\n          } else {\n            this.myMessage = \"Could not save profile!\";\n            this.reset();\n          }\n        }\n      }, err => {\n        this.myMessage = \"Network Issue!\";\n        this.reset();\n      });\n    }\n    reset() {\n      setTimeout(() => {\n        this.myMessage = undefined;\n        this.savingStory = false;\n        this.progress = {\n          percentage: 0\n        };\n      }, 2000);\n    }\n    dataURLtoFile(dataurl, filename) {\n      var arr = dataurl.split(','),\n        mime = arr[0].match(/:(.*?);/)[1],\n        bstr = atob(arr[1]),\n        n = bstr.length,\n        u8arr = new Uint8Array(n);\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n      }\n      return new File([u8arr], filename, {\n        type: mime\n      });\n    }\n    dataURItoBlob(dataURI) {\n      var arr = dataURI.split(',');\n      const byteString = window.atob(arr[1]);\n      const arrayBuffer = new ArrayBuffer(byteString.length);\n      const int8Array = new Uint8Array(arrayBuffer);\n      for (let i = 0; i < byteString.length; i++) {\n        int8Array[i] = byteString.charCodeAt(i);\n      }\n      const blob = new Blob([int8Array], {\n        type: 'image/png'\n      });\n      return new File([blob], 'file.png', {\n        type: 'image/png'\n      });\n      ;\n    }\n    includevalidation() {\n      this.createStoryForm = new FormGroup({\n        title: new FormControl('', [Validators.required, Validators.minLength(5), Validators.maxLength(30)]),\n        topic: new FormControl('', [Validators.required, Validators.minLength(2), Validators.maxLength(30)]),\n        subtopic: new FormControl('', [Validators.minLength(2), Validators.maxLength(30)]),\n        buttontext: new FormControl('', [Validators.required, Validators.minLength(2), Validators.maxLength(10)]),\n        buttonlink: new FormControl('', [Validators.required, Validators.minLength(7)]),\n        story: new FormControl('', [Validators.required, Validators.minLength(2)])\n      });\n    }\n    add(event) {\n      const input = event.input;\n      const value = event.value;\n      // Add our fruit\n      if ((value || '').trim()) {\n        this.blog.Tags.push(value.trim());\n      }\n      // Reset the input value\n      if (input) {\n        input.value = '';\n      }\n      this.blog.Tags = [...new Set(this.blog.Tags)];\n    }\n    remove(tag) {\n      const index = this.blog.Tags.indexOf(tag);\n      if (index >= 0) {\n        this.blog.Tags.splice(index, 1);\n      }\n    }\n    getBlog(emo) {\n      this.getStory.getSingleStory(emo).subscribe(event => {\n        this.loading = true;\n        if (event instanceof HttpResponse) {\n          if (event.body?.toString().includes('No listings found')) {\n            this.loading = false;\n          } else if (event.body?.toString().includes('could not retrieve results')) {\n            this.loading = false;\n          } else if (event.body?.toString()) {\n            this.blogs = JSON.parse(event.body?.toString());\n            this.blog = this.blogs[0];\n            this.previousblog = JSON.parse(JSON.stringify(this.blog));\n            //console.log(this.blog===this.previousblog);\n            this.meng = this.blogs.imageURL;\n            this.initialImage = `https://us-central1-reaphoster.cloudfunctions.net/app/api/files/getfile?filename=` + this.blog.imageURL + `.png`;\n            this.loading = false;\n          }\n        }\n      }, err => {\n        this.loading = false;\n      });\n    }\n    returnJSONblog() {\n      return JSON.stringify(this.blog) === JSON.stringify(this.previousblog);\n    }\n    static {\n      this.ɵfac = function EditStoriesComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || EditStoriesComponent)(i0.ɵɵdirectiveInject(i1.CreateStoryService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.StoryService), i0.ɵɵdirectiveInject(i4.UpdateStoryService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: EditStoriesComponent,\n        selectors: [[\"app-edit-stories\"]],\n        decls: 4,\n        vars: 2,\n        consts: [[\"chipList\", \"\"], [\"id\", \"contacts\", 1, \"lessee\"], [2, \"position\", \"relative\", \"z-index\", \"100\", \"margin-top\", \"auto\"], [\"style\", \"height: 97vh; width: 100%;display: flex;\", 4, \"ngIf\"], [\"class\", \"container-fluid\", \"style\", \"min-height: 90vh;\", 4, \"ngIf\"], [2, \"height\", \"97vh\", \"width\", \"100%\", \"display\", \"flex\"], [2, \"margin\", \"auto\"], [1, \"sk-folding-cube\"], [1, \"sk-cube1\", \"sk-cube\"], [1, \"sk-cube2\", \"sk-cube\"], [1, \"sk-cube4\", \"sk-cube\"], [1, \"sk-cube3\", \"sk-cube\"], [1, \"container-fluid\", 2, \"min-height\", \"90vh\"], [1, \"row\", 2, \"margin-bottom\", \"5vh\"], [1, \"col-12\", \"scali\"], [2, \"text-align\", \"center\"], [1, \"display-4\", 2, \"max-width\", \"100%\"], [3, \"$imageChanged\", \"_imageSrc\", \"_config\"], [\"novalidate\", \"\", 3, \"ngSubmit\", \"formGroup\"], [\"appearance\", \"fill\", 3, \"color\"], [2, \"color\", \"white\"], [\"matInput\", \"\", \"formControlName\", \"title\", 2, \"color\", \"white\", 3, \"ngModelChange\", \"ngModel\"], [\"appearance\", \"fill\", 2, \"color\", \"white\"], [\"formControlName\", \"topic\", 2, \"color\", \"white\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"Coding\", 2, \"color\", \"#65026e\"], [\"value\", \"Anime\", 2, \"color\", \"#65026e\"], [\"value\", \"Animation\", 2, \"color\", \"#65026e\"], [\"value\", \"Movies\", 2, \"color\", \"#65026e\"], [\"value\", \"Music\", 2, \"color\", \"#65026e\"], [\"matInput\", \"\", \"formControlName\", \"subtopic\", 2, \"color\", \"white\", 3, \"ngModelChange\", \"ngModel\"], [\"matInput\", \"\", \"formControlName\", \"buttontext\", 2, \"color\", \"white\", 3, \"ngModelChange\", \"ngModel\"], [\"matInput\", \"\", \"formControlName\", \"buttonlink\", 2, \"color\", \"white\", 3, \"ngModelChange\", \"ngModel\"], [\"aria-label\", \"Fruit selection\"], [\"style\", \"color: white;\\n                                       background-color: #65026e;\", 3, \"removable\", \"removed\", 4, \"ngFor\", \"ngForOf\"], [\"placeholder\", \"Add tag... (Press enter/space to add)\", 2, \"color\", \"white\", 3, \"matChipInputTokenEnd\", \"matChipInputFor\", \"matChipInputSeparatorKeyCodes\", \"matChipInputAddOnBlur\"], [\"appearance\", \"fill\"], [\"matInput\", \"\", \"rows\", \"4\", \"formControlName\", \"story\", 2, \"color\", \"white\", 3, \"ngModelChange\", \"ngModel\"], [\"width\", \"100%\", 3, \"src\", 4, \"ngIf\"], [\"class\", \"progress\", 4, \"ngIf\"], [\"style\", \"color: white;\", 4, \"ngIf\"], [1, \"coder\", 2, \"color\", \"white\", \"display\", \"block\", 3, \"innerHTML\"], [\"class\", \"sk-folding-cube\", 4, \"ngIf\"], [\"style\", \"text-align: center;\", 4, \"ngIf\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"class\", \"uptop2\", 3, \"disabled\", 4, \"ngIf\"], [2, \"color\", \"white\", \"background-color\", \"#65026e\", 3, \"removed\", \"removable\"], [\"matChipRemove\", \"\", 4, \"ngIf\"], [\"matChipRemove\", \"\"], [\"width\", \"100%\", 3, \"src\"], [1, \"progress\"], [\"role\", \"progressbar\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"progress-bar-info\", \"progress-bar-striped\", 3, \"ngStyle\"], [3, \"ngClass\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", 1, \"uptop2\", 3, \"disabled\"], [\"aria-label\", \"subject\"]],\n        template: function EditStoriesComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2);\n            i0.ɵɵtemplate(2, EditStoriesComponent_div_2_Template, 7, 0, \"div\", 3)(3, EditStoriesComponent_div_3_Template, 60, 25, \"div\", 4);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", !ctx.blogs || ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.blogs && !ctx.loading);\n          }\n        },\n        dependencies: [i5.NgClass, i5.NgForOf, i5.NgIf, i5.NgStyle, i6.MatButton, i7.MatIcon, i8.NgpImagePickerComponent, i9.MatFormField, i9.MatLabel, i10.MatInput, i11.MatSelect, i12.MatOption, i13.ɵNgNoValidate, i13.DefaultValueAccessor, i13.NgControlStatus, i13.NgControlStatusGroup, i13.FormGroupDirective, i13.FormControlName, i14.MatChipGrid, i14.MatChipInput, i14.MatChipRemove, i14.MatChipRow],\n        styles: [\".rightee[_ngcontent-%COMP%]{float:right;right:0}.widthing[_ngcontent-%COMP%]{width:250px}.rotation[_ngcontent-%COMP%]{transform:rotate(180deg)}.whole[_ngcontent-%COMP%]{height:100vh;background-image:linear-gradient(purple,purple,#00f)}.lessee[_ngcontent-%COMP%]{position:relative;width:100%;align-items:center;justify-content:center}.lessee[_ngcontent-%COMP%]:before{content:\\\"\\\";background-image:url(board-1709188.png);background-size:cover;position:absolute;inset:0;opacity:.2}.custom-shape-divider-top-1613575268[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;overflow:hidden;line-height:0}.custom-shape-divider-top-1613575268[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:relative;display:block;width:calc(100% + 1.3px);height:150px;transform:rotateY(180deg)}.custom-shape-divider-top-1613575268[_ngcontent-%COMP%]   .shape-fill[_ngcontent-%COMP%]{fill:#7ce2fc}.uptop[_ngcontent-%COMP%]{position:absolute;z-index:1000;background:none;margin-left:10px;margin-top:10px;color:purple;margin-right:10px}.uptop2[_ngcontent-%COMP%]{z-index:1000;background:none;color:#fff;font-weight:300;width:100%;margin:0;font-size:22px;border:purple solid 2px;display:block;animation:_ngcontent-%COMP%_boinging 1.4s infinite}@keyframes _ngcontent-%COMP%_boinging{0%{transform:scale(.95)}50%{transform:scale(1)}to{transform:scale(.95)}}.uptop3[_ngcontent-%COMP%]{z-index:1000;background:none;margin-left:10px;color:#fff;font-weight:300;font-size:35px;border:purple solid 2px;display:block;animation:_ngcontent-%COMP%_uptoping 3s infinite}@keyframes _ngcontent-%COMP%_uptoping{50%{transform:scale(1)}70%{transform:scale(.1,1.5)}75%{transform:translate(10px)}to{transform:scale(1)}}mat-sidenav[_ngcontent-%COMP%]{background:none}.centring[_ngcontent-%COMP%]{object-position:center;object-fit:cover;display:block;position:relative;max-height:100vh;min-height:100vh;opacity:.9}.display-4[_ngcontent-%COMP%]{font-weight:300;font-size:70px;color:#fff;line-height:1.2;margin-left:10px;font-family:Agency FB,arial;color:#65026e}.display-3[_ngcontent-%COMP%]{font-weight:300;font-size:20px;color:#fff;line-height:1.2;margin-left:12px}.display-2[_ngcontent-%COMP%]{font-weight:300;font-size:25px;color:#fff;line-height:1.2;margin-left:12px}.mysvg[_ngcontent-%COMP%]{margin:0}.nondisp[_ngcontent-%COMP%]{display:none}.padder[_ngcontent-%COMP%]{padding-left:20px}.expl[_ngcontent-%COMP%]{color:#fff;font-size:17px;font-weight:300;line-height:1.5}.scali[_ngcontent-%COMP%]{padding:0 10vw}.coder[_ngcontent-%COMP%]     code{font-size:20px}@media only screen and (max-width: 600px){.display-4[_ngcontent-%COMP%]{font-size:40px}.display-3[_ngcontent-%COMP%]{font-size:15px}.display-2[_ngcontent-%COMP%]{font-size:20px}.nondisp[_ngcontent-%COMP%]{display:block}.padder[_ngcontent-%COMP%]{padding-left:0}.uptop3[_ngcontent-%COMP%], .uptop2[_ngcontent-%COMP%]{font-size:17px}.expl[_ngcontent-%COMP%]{font-size:16px}}.overflowing[_ngcontent-%COMP%]{max-height:100vh;overflow-y:scroll}[_ngcontent-%COMP%]::-webkit-scrollbar{width:2px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:1px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:1px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.fittings[_ngcontent-%COMP%]{object-fit:cover;object-position:center;height:150px}mat-card-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-decoration:none;width:100%;color:#f70ef7}a[_ngcontent-%COMP%]{text-decoration:none}.row[_ngcontent-%COMP%]{margin:0}mat-grid-title[_ngcontent-%COMP%]{font-size:44px}mat-select[_ngcontent-%COMP%]{color:#fff}mat-form-field[_ngcontent-%COMP%]{width:100%}.sk-folding-cube[_ngcontent-%COMP%]{margin:20px auto;width:40px;height:40px;position:relative;transform:rotate(45deg)}.sk-folding-cube[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{float:left;width:50%;height:50%;position:relative;transform:scale(1.1)}.sk-folding-cube[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#7ce2fc;animation:_ngcontent-%COMP%_sk-foldCubeAngle 2.4s infinite linear both;transform-origin:100% 100%}.sk-folding-cube[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{transform:scale(1.1) rotate(90deg)}.sk-folding-cube[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{transform:scale(1.1) rotate(180deg)}.sk-folding-cube[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{transform:scale(1.1) rotate(270deg)}.sk-folding-cube[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]:before{animation-delay:.3s}.sk-folding-cube[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]:before{animation-delay:.6s}.sk-folding-cube[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]:before{animation-delay:.9s}@keyframes _ngcontent-%COMP%_sk-foldCubeAngle{0%,10%{transform:perspective(140px) rotateX(-180deg);opacity:0}25%,75%{transform:perspective(140px) rotateX(0);opacity:1}90%,to{transform:perspective(140px) rotateY(180deg);opacity:0}}.greenish[_ngcontent-%COMP%]{color:#90ee90}.redish[_ngcontent-%COMP%]{color:#ffa07a}.bluish[_ngcontent-%COMP%]{color:#7ce2fc}[_ngcontent-%COMP%]::placeholder{color:#fff}\"]\n      });\n    }\n  }\n  return EditStoriesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}